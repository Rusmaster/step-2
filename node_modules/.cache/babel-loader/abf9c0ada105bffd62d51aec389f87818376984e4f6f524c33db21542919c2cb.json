{"ast":null,"code":"var _jsxFileName = \"C:\\\\YandexPracticum\\\\step-2-redux \\u2014 \\u043A\\u043E\\u043F\\u0438\\u044F (2)\\\\src\\\\components\\\\BurgerContent\\\\BurgerConstructor\\\\DraggableIngredient.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect } from \"react\";\nimport { ConstructorElement, DragIcon } from \"@ya.praktikum/react-developer-burger-ui-components\";\nimport styles from \"./draggable-animal.module.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst DraggableIngredient = ({\n  ingredient,\n  index,\n  moveIngredient,\n  onRemoveIngredient\n}) => {\n  _s();\n  const [isDragging, setIsDragging] = useState(false);\n  const [cursorPosition, setCursorPosition] = useState({\n    x: 0,\n    y: 0\n  });\n  const [elementPosition, setElementPosition] = useState({\n    x: 0,\n    y: 0\n  });\n  const elementRef = useRef(null);\n  const handleMouseDown = e => {\n    setIsDragging(true);\n    setCursorPosition({\n      x: e.clientX - e.currentTarget.getBoundingClientRect().left,\n      y: e.clientY - e.currentTarget.getBoundingClientRect().top\n    });\n  };\n  const handleMouseMove = e => {\n    if (!isDragging) return;\n    e.stopPropagation();\n    e.preventDefault();\n    setElementPosition({\n      x: e.clientX - cursorPosition.x,\n      y: e.clientY - cursorPosition.y\n    });\n  };\n  const handleMouseUp = () => {\n    setIsDragging(false);\n    // здесь нужно добавить логику перемещения элемента внутри списка\n    moveIngredient(index, Math.floor(elementPosition.y / elementRef.current.clientHeight));\n    setElementPosition({\n      x: 0,\n      y: 0\n    });\n  };\n  useEffect(() => {\n    if (isDragging) {\n      window.addEventListener(\"mousemove\", handleMouseMove);\n      window.addEventListener(\"mouseup\", handleMouseUp);\n    } else {\n      window.removeEventListener(\"mousemove\", handleMouseMove);\n      window.removeEventListener(\"mouseup\", handleMouseUp);\n    }\n    return () => {\n      window.removeEventListener(\"mousemove\", handleMouseMove);\n      window.removeEventListener(\"mouseup\", handleMouseUp);\n    };\n  }, [isDragging, cursorPosition]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: elementRef,\n    onMouseDown: handleMouseDown,\n    className: styles.animalElement,\n    style: {\n      transform: isDragging ? `translate(${elementPosition.x}px, ${elementPosition.y}px)` : \"none\",\n      opacity: isDragging ? 0.5 : 1,\n      zIndex: isDragging ? 1000 : 1\n    },\n    children: [/*#__PURE__*/_jsxDEV(DragIcon, {\n      type: \"primary\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ConstructorElement, {\n      text: ingredient.name,\n      price: ingredient.price,\n      thumbnail: ingredient.image,\n      handleClose: () => onRemoveIngredient(ingredient.uniqueId)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 70,\n    columnNumber: 5\n  }, this);\n};\n_s(DraggableIngredient, \"hGrBllDaHqMFaHa1CRxDaHgPtfo=\");\n_c = DraggableIngredient;\nexport default DraggableIngredient;\nvar _c;\n$RefreshReg$(_c, \"DraggableIngredient\");","map":{"version":3,"names":["React","useState","useRef","useEffect","ConstructorElement","DragIcon","styles","jsxDEV","_jsxDEV","DraggableIngredient","ingredient","index","moveIngredient","onRemoveIngredient","_s","isDragging","setIsDragging","cursorPosition","setCursorPosition","x","y","elementPosition","setElementPosition","elementRef","handleMouseDown","e","clientX","currentTarget","getBoundingClientRect","left","clientY","top","handleMouseMove","stopPropagation","preventDefault","handleMouseUp","Math","floor","current","clientHeight","window","addEventListener","removeEventListener","ref","onMouseDown","className","animalElement","style","transform","opacity","zIndex","children","type","fileName","_jsxFileName","lineNumber","columnNumber","text","name","price","thumbnail","image","handleClose","uniqueId","_c","$RefreshReg$"],"sources":["C:/YandexPracticum/step-2-redux — копия (2)/src/components/BurgerContent/BurgerConstructor/DraggableIngredient.tsx"],"sourcesContent":["import React, { useState, useRef, useEffect } from \"react\";\r\nimport {\r\n  ConstructorElement,\r\n  DragIcon,\r\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { Product } from \"../BurgerIngredients/types\";\r\nimport styles from \"./draggable-animal.module.css\";\r\n\r\ninterface DraggableIngredientProps {\r\n  ingredient: Product & { uniqueId: string };\r\n  index: number;\r\n  moveIngredient: (dragIndex: number, hoverIndex: number) => void;\r\n  onRemoveIngredient: (uniqueId: string) => void;\r\n}\r\n\r\nconst DraggableIngredient: React.FC<DraggableIngredientProps> = ({\r\n  ingredient,\r\n  index,\r\n  moveIngredient,\r\n  onRemoveIngredient,\r\n}) => {\r\n  const [isDragging, setIsDragging] = useState(false);\r\n  const [cursorPosition, setCursorPosition] = useState({ x: 0, y: 0 });\r\n  const [elementPosition, setElementPosition] = useState({ x: 0, y: 0 });\r\n  const elementRef = useRef<HTMLDivElement>(null);\r\n\r\n  const handleMouseDown = (e: React.MouseEvent) => {\r\n    setIsDragging(true);\r\n    setCursorPosition({\r\n      x: e.clientX - e.currentTarget.getBoundingClientRect().left,\r\n      y: e.clientY - e.currentTarget.getBoundingClientRect().top,\r\n    });\r\n  };\r\n\r\n  const handleMouseMove = (e: MouseEvent) => {\r\n    if (!isDragging) return;\r\n    e.stopPropagation();\r\n    e.preventDefault();\r\n    setElementPosition({\r\n      x: e.clientX - cursorPosition.x,\r\n      y: e.clientY - cursorPosition.y,\r\n    });\r\n  };\r\n\r\n  const handleMouseUp = () => {\r\n    setIsDragging(false);\r\n    // здесь нужно добавить логику перемещения элемента внутри списка\r\n    moveIngredient(\r\n      index,\r\n      Math.floor(elementPosition.y / elementRef.current!.clientHeight)\r\n    );\r\n    setElementPosition({ x: 0, y: 0 });\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (isDragging) {\r\n      window.addEventListener(\"mousemove\", handleMouseMove);\r\n      window.addEventListener(\"mouseup\", handleMouseUp);\r\n    } else {\r\n      window.removeEventListener(\"mousemove\", handleMouseMove);\r\n      window.removeEventListener(\"mouseup\", handleMouseUp);\r\n    }\r\n    return () => {\r\n      window.removeEventListener(\"mousemove\", handleMouseMove);\r\n      window.removeEventListener(\"mouseup\", handleMouseUp);\r\n    };\r\n  }, [isDragging, cursorPosition]);\r\n\r\n  return (\r\n    <div\r\n      ref={elementRef}\r\n      onMouseDown={handleMouseDown}\r\n      className={styles.animalElement}\r\n      style={{\r\n        transform: isDragging\r\n          ? `translate(${elementPosition.x}px, ${elementPosition.y}px)`\r\n          : \"none\",\r\n        opacity: isDragging ? 0.5 : 1,\r\n        zIndex: isDragging ? 1000 : 1,\r\n      }}\r\n    >\r\n      <DragIcon type=\"primary\" />\r\n      <ConstructorElement\r\n        text={ingredient.name}\r\n        price={ingredient.price}\r\n        thumbnail={ingredient.image}\r\n        handleClose={() => onRemoveIngredient(ingredient.uniqueId)}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DraggableIngredient;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}